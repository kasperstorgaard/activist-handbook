<link rel="import" href="../../libs/redux.html">

<script>
  (() => {
    const initialState = {
      country: null,
      countries: []
    };

    const reducer = (state, {type, payload = null}) => {
      if (!state) {
        return initialState;
      }

      const handleActions = {
        'COUNTRIES_LOAD': () => Object.assign({}, state, { countries: payload }),
        'COUNTRY_DETAIL_LOAD': () => Object.assign({}, state, { country: payload })
      };

      const handleAction = handleActions[type] || (() => state);
      return handleAction();
    }

    window.RootStore = Redux.createStore(
      reducer,
      (__REDUX_DEVTOOLS_EXTENSION__ || (() => null))(),
      Redux.applyMiddleware(ReduxThunk.default)
    );
  })();
</script>